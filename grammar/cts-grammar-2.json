{
  "comment": "CTS Grammar version 2.0",
  "author": "Ted Benson <eob@csail.mit.edu>",

  "lex": {
    "macros": {
      "esc": "\\\\",
      "hex": "u[a-fA-F0-9]{4}",
      "keyString": "[^;:\"\\{\\}]",
      "safeQuoted": "[^\"{esc}]",
      "is": "\\s+is\\s+",
      "are": "\\s+are\\s+",
      "graft": "\\s+graft\\s+",
      "ifexist": "\\s+if\\-exist\\s+",
      "ifnexist": "\\s+if\\-nexist\\s+"
    },
    "rules": [
      ["\\s+", "/* skip whitespace */"],
      ["\"(?:{esc}[\"bfnrt/{esc}]|{esc}{hex}|{safeQuoted})*\"", "yytext = yytext.substr(1,yyleng-2); return 'QUOTEDSTRING';"],
      ["(?:{esc}[\"bfnrt/{esc}]|{esc}{hex}|{keyString})+", "return 'KEYSTRING';"],
      ["({is}|{are}|{graft}|{ifexist}|{ifnexist})", "return 'RELATIONSTRING';"],
      [":", "return ':';"],
      [";", "return ';';"],
      ["\\{", "return '{';"],
      ["\\}", "return '}';"]
    ]
  },

  "tokens": "KEYSTRING QUOTEDSTRING : ; { }",
  "start": "treesheet",

  "bnf": {
    "treesheet": [ "Relation" ],
    "Statements": [ "Statement", "Statement Statements" ],
    "Statement": [ "Selector Relation Selector ;"],
    "Selector": [ "SELECTORSTRING", "SELECTORSTRING KeyValueBlock" ],
    "Relation": [ "RELATIONSTRING", "RELATIONSTRING KeyValueBlock" ],
    "KeyValueBlock": [ "{ KeyValues }" ],
    "KeyValues": [ "KeyValue", "KeyValues KeyValue" ],
    "KeyValue": [ "Key : Value ;" ],
    "Key": ["KEYSTRING"],
    "Value": ["QUOTEDSTRING", "KEYSTRING"]
  }
}
